
// Modifications to the original script: addition of "use strict"; == replaced with ===.
/**
 * Load an external JavaScript without blocking other downloads or page processes.
 * @param {String} url The URL of the JavaScript file. This URL is either an absolute URL, or relative to the HTML file that should load the script.
 * @param {Function} callback The function that should be called when the external JavaScript file has finished loading.
 * @author Nicholas C. Zakas
 * @see Nicholas C. Zakas's article <a href="http://www.nczonline.net/blog/2009/07/28/the-best-way-to-load-external-javascript/">The best way to load external JavaScript</a> (NCZOnline, 28 July 2009).
 * @see Nicholas C. Zakas's article <a href="http://www.nczonline.net/blog/2009/06/23/loading-javascript-without-blocking/">Loading JavaScript without blocking</a> (NCZOnline, 23 June 2009).
 * @see Jack Slingerland's article <a href="http://www.re-cycledair.com/load-javascript-dynamically-with-lazy-load">Load Javascript Dynamically With Lazy Load</a> (Re-Cycled Air, 11 September 2010).
 */
function loadScript(url, callback) {
    "use strict";
    var script = document.createElement("script");
    script.type = "text/javascript";

    if (script.readyState) {  //IE
        script.onreadystatechange = function() {
            if (script.readyState === "loaded" ||
                    script.readyState === "complete") {
                script.onreadystatechange = null;
                callback();
            } // else { window.alert("DoMhelp.js not ready");}
        };
    } else {  //Others
        script.onload = function() {
            callback();
        };
    }
    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
}


/**
 * @namespace csrc @@add description.
 * @author Christophe Strobbe
 * @fileOverview Licensed under the Apache License, Version 2.0 (the "License");
        you may not use this file except in compliance with the License.
        You may obtain a copy of the License at
        
           http://www.apache.org/licenses/LICENSE-2.0
        
        Unless required by applicable law or agreed to in writing, software
        distributed under the License is distributed on an "AS IS" BASIS,
        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        See the License for the specific language governing permissions and
        limitations under the License.
 */

var DEBUG = true;

var csrc = {
	init: function() {
	    "use strict";
		if (!document.getElementById || !document.createTextNode) {return;}

        loadScript("jslibs/DOMhelp.js", function() {       // TODO: move this URL to a config / properties file.
            if (DEBUG) { window.alert("DOMhelp.js loaded."); }
        });
	},

	// @@check: is NodeList object an array? Check at https://www.w3.org/TR/selectors-api/#nodelist & https://developer.mozilla.org/en-US/docs/Web/API/NodeList 
    /**
     * Get all heading elements (h1 - h6) that are descendants of the given context (a DOM node).
     * @param {Element} context DOM node in which the headings should be found.
     * @returns {Array} A NodeList object containing all the headings in the given context. Note: This list is not live.
     * @author Christophe Strobbe
     */
	getHeadingsInContext: function(context) {
        "use strict";
        var headinglist = null;
        // @@TODO check context more thoroughly, e.g. that is is an element?
        if (context) {
            context.querySelectorAll('h1', 'h2', 'h3', 'h4', 'h5', 'h6');
        }
	    return headinglist; // NodeList object; 
	    // see:  http://www.w3schools.com/jsref/met_document_queryselectorall.asp
	    // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll 
	    // see: https://www.w3.org/TR/selectors-api/#queryselectorall 
	}
};

csrc.addEvent(window, 'load', csrc.init, false);
